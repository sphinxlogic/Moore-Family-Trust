function escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(e,t,a){return e.replace(new RegExp(escapeRegExp(t),"g"),a)}XA.ready(function(e){XA.hasPageModes()||0==e(".related-content__section:not(.always-show-content) .com-wrapper").length&&e(".related-content__section:not(.always-show-content)").addClass("no-results")}),XA.ready(function(a){function i(e){return e.replace(/[-:]/g,"")}var e,t,n,o;XA.hasPageModes()||a(".add-to-calendar-js-focus").length&&(e=function(){var e=a(".add-to-calendar__data .add-to-calendar__date_start").length?a(".add-to-calendar__data .add-to-calendar__date_start").text():"",t=a(".add-to-calendar__data .add-to-calendar__date_end").length?a(".add-to-calendar__data .add-to-calendar__date_end").text():"";return{startDate:e,endDate:t,title:a(".add-to-calendar__data .add-to-calendar__title").length?a(".add-to-calendar__data .add-to-calendar__title").text():"",description:a(".add-to-calendar__data .add-to-calendar__description").length?a(".add-to-calendar__data .add-to-calendar__description").text():"",location:a(".add-to-calendar__data .add-to-calendar__location").length?a(".add-to-calendar__data .add-to-calendar__location").text():""}}(),t=e.title.replace(/ /g,"-")+"-"+Math.floor(5e3*Math.random()+1e3)+"-calendar",n=a(".add-to-calendar-js-click").data("label"),o="<label class='add-to-calendar-label' for='"+t+"'>"+n+"</label><input name='add-to-calendar-checkbox' class='add-to-calendar-checkbox' id="+t+" type='checkbox'><div class='add-to-calendar-dropdown'>"+function(e){var t=i(e.startDate),a=i(e.endDate);return"<a class='icon-google' href="+encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text="+(e.title||""),"&dates="+(t||""),"/"+(a||""),"&details="+(e.description||""),"&location="+(e.location||"")].join(""))+" target='_blank'>Google Calendar</a>"}(e)+function(e){var t=i(e.startDate),a=(new Date(e.endDate).getTime()-new Date(e.startDate).getTime())/6e4,n=(a<600?"0"+Math.floor(a/60):Math.floor(a/60)+"")+(a%60<10?"0"+a%60:a%60+"");return"<a class='icon-yahoo' href="+encodeURI(["http://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(e.title||""),"&st="+t,"&dur="+(n||""),"&desc="+(e.description||""),"&in_loc="+(e.location||"")].join(""))+" target='_blank'>Yahoo Calendar</a>"}(e)+function(e){var t=e.startDate,a=e.endDate;return"<a class='icon-outlook' href="+encodeURI(["https://outlook.office.com/owa","?path=/calendar/action/compose","&startdt="+t,"&enddt="+a,"&body="+e.description,"&location="+e.location,"&subject="+e.title].join(""))+" target='_blank'>Office 365</a>"}(e)+function(e){var t=e.startDate,a=e.endDate;return"<a class='icon-outlook' href="+encodeURI(["https://outlook.live.com/calendar/0/deeplink/compose","?path=/calendar/action/compose","&startdt="+t,"&enddt="+a,"&body="+e.description,"&location="+e.location,"&subject="+e.title].join(""))+" target='_blank'>Outlook Live Calendar</a>"}(e)+function(e){var t=i(e.startDate),a=i(e.endDate),n=e.description||"";return n=n.replace(/\n/gm,"\\n"),"<a class='icon-ical' href="+encodeURI("data:text/calendar;charset=utf8,"+["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(t||""),"DTEND:"+(a||""),"SUMMARY:"+(e.title||""),"DESCRIPTION:"+n,"LOCATION:"+(e.location||""),"UID:"+document.URL,"END:VEVENT","END:VCALENDAR"].join("\n"))+" target='_blank' download='Calendar-event.ics'>Download iCal</a>"}(e)+"</div>",a(".add-to-calendar-js-click").append(o),a(document).on("click",function(e){a(e.target).closest(".add-to-calendar-component").length<=0&&0<a(".add-to-calendar-dropdown:visible").length&&a(".add-to-calendar-label").click()}))}),XA.ready(function(e){if(!XA.hasPageModes()&&document.cookie.indexOf("browserChecked")<0){var t=new Date;t.setHours(t.getHours()+1),document.cookie="browserChecked=True; expires="+t.toUTCString()+"; path=/;",e(".fetch").length||e("#browserDetectModal").modal("show")}}),XA.ready(function(e){var t=0;XA.hasPageModes()?e("#carouselModal").removeClass("modal fade"):((0<window.navigator.userAgent.indexOf("MSIE")||navigator.userAgent.match(/Trident\/7\./))&&e("html").addClass("IEDetected"),0<e("#carouselModal").length&&(e(".masonary-gallery-layout__panel").on("click",function(){t=e(this).data("index"),e("#carouselModal").on("show.bs.modal",function(){setTimeout(function(){e("#Info-Carousel .slick-carousel").slick("slickGoTo",t),e("#Nav-Carousel .slick-carousel").slick("slickGoTo",t),e("#Info-Carousel .slick-carousel").slick("refresh"),e("#Nav-Carousel .slick-carousel").slick("refresh")},200)})}),e("#Nav-Carousel .slick-carousel-Item").on("click",function(){e("#Nav-Carousel .slick-carousel-Item").removeClass("slick-current"),e(this).toggleClass("slick-current"),e("#Info-Carousel .slick-carousel").slick("slickGoTo",e(this).data("slick-index"))})))}),XA.ready(function(a){function e(){0<a(".event-listing-filter-date-range").length&&(a(".event-listing-filter-date-range").find("input").data("daterangepicker").setEndDate(""),a(".date-filter-accordion").find("input").data("daterangepicker").setEndDate(""),a(".event-listing-filter-date-range").find("input").val(""),a(".date-filter-accordion").find("input").val("")),0<a(".event-listing-filter-mobile-banner").length&&(a(".news-listing__mobile-filters").html(a(".news-listing__mobile-filters").data("name")),a(".event-listing-filter-mobile-banner").removeClass("selected"));var e=window.location.hash,t="";-1<e.indexOf("#g")&&(t=e.split("&").filter(function(e){if(e.includes("#g"))return e}));""===t&&(t="z=1"),window.location.hash=t}XA.hasPageModes()||(0<a(".clear-all").length&&a(".clear-all").on("click",function(){e(),function(){if(0<a(".custom-facet-radius-dropdown").length){var e=a(".custom-facet-radius-dropdown").attr("data-properties");e=jQuery.parseJSON(e),a(".custom-facet-radius-dropdown").find(".dd-title-button").html(e.f),a(".custom-facet-radius-dropdown").find("input").each(function(e,t){a(this).removeAttr("checked")})}0<a(".location-detector").length&&a(".location-detector").find("input").val("")}()}),0<a(".accordion-filter-mobile .apply-btn").length&&a(".accordion-filter-mobile .apply-btn").on("click",function(){a(".accordion-filter-link-list").find(".checkbox:checked").length<=0&&(a(".accordion-filter-input").length<=0||0<a(".accordion-filter-input").length&&""==a(".accordion-filter-input").val())&&e()}))}),XA.ready(function(o){XA.hasPageModes()||(o(".contact-information-component__section-description").each(function(){var e=o(this).html(),t=o(this).text(),a=null!=o(this).data("read-more")&&""!=o(this).data("read-more")?o(this).data("read-more"):"Read More",n=null!=o(this).data("read-less")&&""!=o(this).data("read-less")?o(this).data("read-less"):"Read Less";if(300<t.length){var i="<div class='trimmed-description'>"+e+"<a class='contact-information-component-read-more'>"+a+"</a></div><div class='full-description'>"+e+"<a class='contact-information-component-read-less'><br>"+n+"</a></div>";o(this).html(i)}}),o(".contact-information-component-read-more").on("click",function(){o(this).closest(".contact-information-component__section-description").addClass("display")}),o(".contact-information-component-read-less").on("click",function(){o(this).closest(".contact-information-component__section-description").removeClass("display")}))}),XA.component.search.facet.customdaterange=function(m,g){var w,d,b,k,e={},t=!1;d=function(e){if(null!==e&&""!==e){var t=e.split("/");return t[2]+t[0]+t[1]}},b=function(e){if(""!==e){if(8!==e.length)throw"Invalid Date: "+e;var t=e.substr(0,4);return new Number(e.substr(4,2))+"/"+e.substr(6,2)+"/"+t}},k=function(e,t,a){for(var n=0;n<e.length;n++)a[e[n]]=t;return a};var a=Backbone.Model.extend({defaults:{dataProperties:{},sig:[]}}),n=XA.component.search.baseView.extend({initialize:function(){this.properties=this.$el.data().properties,this.model&&(this.model.set({dataProperties:this.properties}),this.model.set("sig",this.translateSignatures(this.properties.searchResultsSignature,this.properties.f))),this.model.on("change",this.render,this),XA.component.search.vent.on("hashChanged",this.updateComponent.bind(this))},events:{"click .cancelBtn":"clearFilter"},getDefaultDates:function(){var e=new Date,t=2==String(e.getDate()).length?String(e.getDate()):"0"+String(e.getDate()),a=2==String(e.getMonth()+1).length?String(e.getMonth()+1):"0"+String(e.getMonth()+1),n=e.getFullYear();return[a+"/"+t+"/"+n,a+"/"+t+"/"+(n+1)]},subtractDays:function(e){var t=new Date;t.setDate(t.getDate()-e);var a=2==String(t.getDate()).length?String(t.getDate()):"0"+String(t.getDate());return(2==String(t.getMonth()+1).length?String(t.getMonth()+1):"0"+String(t.getMonth()+1))+"/"+a+"/"+t.getFullYear()},addDays:function(e){var t=new Date;t.setDate(t.getDate()+e);var a=2==String(t.getDate()).length?String(t.getDate()):"0"+String(t.getDate());return(2==String(t.getMonth()+1).length?String(t.getMonth()+1):"0"+String(t.getMonth()+1))+"/"+a+"/"+t.getFullYear()},updateSelectedDateTitle:function(){var o=this.$el.find(".accordion-filter-title");m(g).ajaxStop(function(e,t,a){if(m(".event-listing-filter-date-range").find("input").data("daterangepicker").endDate.isValid()){if(m(window).width()<=767&&0<m(".mobile-date-filter").find(".end-date").length){var n=m(".date-filter-accordion").find("input").data("daterangepicker").startDate.format("MMM DD"),i=m(".date-filter-accordion").find("input").data("daterangepicker").endDate.format("MMM DD");o.html(n+" - "+i),o.addClass("selected")}}else o.val(""),o.removeClass("selected")})},updateFacet:function(e){var t=this.$el.find(".dates"),a=(w.parseHashParameters(window.location.hash),this.model.get("sig")),n=this.getDefaultDates();if((m(window).width()<=767&&0<m(".mobile-date-filter").find(".end-date").length||m(".date-filter-accordion").find("input").data("daterangepicker").endDate.isValid())&&""!=m(".date-filter-accordion").find("input").val()){var i=m(".date-filter-accordion").find("input").data("daterangepicker").endDate.format("MM/DD/YYYY"),o=m(".date-filter-accordion").find("input").data("daterangepicker").startDate.format("MM/DD/YYYY"),s=(i=m(".date-filter-accordion").find("input").data("daterangepicker").endDate.format("MM/DD/YYYY"),m(".date-filter-accordion").find("input").data("daterangepicker").startDate.isValid()?o:n[0]),l=m(".date-filter-accordion").find("input").data("daterangepicker").endDate.isValid()?i:n[1];m(".date-filter-accordion").find("input").data("daterangepicker").setEndDate(l),m(".event-listing-filter-date-range").find("input").data("daterangepicker").setEndDate(l),w.updateHash(this.updateSignaturesHash(a,d(s)+"|"+d(l),{})),t.addClass("has-active-facet")}else if(0<m(".mobile-date-filter").find(".end-date").length){i=m(".event-listing-filter-date-range").find("input").data("daterangepicker").endDate.format("MM/DD/YYYY"),o=m(".event-listing-filter-date-range").find("input").data("daterangepicker").startDate.format("MM/DD/YYYY"),i=m(".event-listing-filter-date-range").find("input").data("daterangepicker").endDate.format("MM/DD/YYYY"),s=m(".event-listing-filter-date-range").find("input").data("daterangepicker").startDate.isValid()?o:n[0],l=m(".event-listing-filter-date-range").find("input").data("daterangepicker").endDate.isValid()?i:n[1];m(".date-filter-accordion").find("input").data("daterangepicker").setEndDate(l),m(".event-listing-filter-date-range").find("input").data("daterangepicker").setEndDate(l),w.updateHash(this.updateSignaturesHash(a,d(s)+"|"+d(l),{})),t.addClass("has-active-facet")}this.updateSelectedDateTitle()},render:function(){function e(e,t){e.isValid()&&t.isValid()?e.isValid()&&t.isValid()?(m(this).val(e.format("MM/DD/YYYY")+" - "+t.format("MM/DD/YYYY")),w.updateHash(k(c.data("sig"),e.format("YYYYMMDD")+"|"+t.format("YYYYMMDD"),{}))):c.val(""):(c.data("daterangepicker").setStartDate(d[0]),c.data("daterangepicker").setEndDate(null),c.val(""),w.updateHash(k(c.data("sig"),"",{})))}var t,a,n=this.model.get("dataProperties").fromDateVisible,i=this.model.get("dataProperties").toDateVisible,o=this.model.get("dataProperties").fromDatePastDays,s=this.model.get("dataProperties").toDateFutureDays,l=parseInt(this.model.get("dataProperties").fromDateDefaultOffset),r=parseInt(this.model.get("dataProperties").toDateDefaultOffset),d=this.getDefaultDates(),c=this.$el.find(".event-listing-filter-date-range").find("input"),f=this.$el.find(".date-filter-accordion").find("input"),h=w.parseHashParameters(window.location.hash),u=this.model.get("sig");this.$el.find(".accordion-filter-title"),m("html").attr("lang")&&m("html").attr("lang");if(c.data("sig",u),m(g).keydown(function(e){13==(e.keyCode||e.which)&&c.is(":focus")&&c.val().length<=0&&(w.updateHash(k(c.data("sig"),"",{})),c.data("daterangepicker").setStartDate(d[0]),c.data("daterangepicker").setEndDate(null),c.val(""))}),c.focus(function(){m(this).hasClass("active")||m(this).addClass("active")}),c.blur(function(){m(this).hasClass("active")&&m(this).removeClass("active"),0<m(this).val().toLowerCase().indexOf("invalid")&&c.val("")}),f.blur(function(){0<m(this).val().toLowerCase().indexOf("invalid")&&f.val("")}),n||i){var p=d[0],v=d[1];""==l||isNaN(l)||(p=this.subtractDays(l)),""==r||isNaN(r)||(v=this.addDays(r)),o&&s?(c.daterangepicker({locale:{singleDatePicker:!0,autoUpdateInput:!1,cancelLabel:"Clear"},maxDate:v},e),f.daterangepicker({locale:{singleDatePicker:!0,autoUpdateInput:!1,cancelLabel:"Clear",direction:"mobile-date-filter"},maxDate:v})):o&&!s?(c.daterangepicker({locale:{singleDatePicker:!0,autoUpdateInput:!1,cancelLabel:"Clear"},maxDate:p},e),f.daterangepicker({locale:{singleDatePicker:!0,autoUpdateInput:!1,cancelLabel:"Clear",direction:"mobile-date-filter"},maxDate:p})):(c.daterangepicker({locale:{singleDatePicker:!0,autoUpdateInput:!1,cancelLabel:"Clear"},minDate:p,maxDate:v},e),f.daterangepicker({locale:{singleDatePicker:!0,autoUpdateInput:!1,cancelLabel:"Clear",direction:"mobile-date-filter"},minDate:p,maxDate:v})),c.on("apply.daterangepicker",function(e,t){m(this).val(t.startDate.format("MM/DD/YYYY")+" - "+t.endDate.format("MM/DD/YYYY")),w.updateHash(k(m(this).data("sig"),t.startDate.format("YYYYMMDD")+"|"+t.endDate.format("YYYYMMDD"),{}))}),f.on("apply.daterangepicker",function(e,t){w.updateHash(k(m(this).data("sig"),t.startDate.format("YYYYMMDD")+"|"+t.endDate.format("YYYYMMDD"),{}))}),c.on("cancel.daterangepicker",m.proxy(this.clearFilter,this)),f.on("cancel.daterangepicker",m.proxy(this.clearFilter,this))}for(a=0;a<u.length;a++)h.hasOwnProperty(u[a])&&""!=h[u[a]]?(t=h[u[a]].split("|"),c.data("daterangepicker").setStartDate(b(t[0])),c.data("daterangepicker").setEndDate(b(t[1])),f.data("daterangepicker").setStartDate(b(t[0])),f.data("daterangepicker").setEndDate(b(t[1]))):a==u.length-1&&(c.data("daterangepicker").setEndDate(""),f.data("daterangepicker").setEndDate(""),c.val(""));0<m(".filter-accordion__section").length&&m(".filter-accordion__section").on("click",".apply-btn",this.updateFacet.bind(this)),this.updateSelectedDateTitle()},clearFilter:function(e){var t,a,n=this.model.get("dataProperties"),i=this.$el.find(".dates"),o=w.parseHashParameters(window.location.hash),s=this.model.get("sig"),l=!1,r=this.getDefaultDates();for(i.removeClass("has-active-facet"),a=0;a<s.length;a++)void 0!==o[t=s[a]]&&""!==o[t]&&(delete n[t],l=!0);l&&(w.updateHash(this.updateSignaturesHash(s,"",o)),this.model.set({dataProperties:n}),i.find("input").data("daterangepicker").setStartDate(r[0]),i.find("input").data("daterangepicker").setEndDate(null),m(".event-listing-filter-date-range").find("input").val(""))},updateComponent:function(e){var t,a,n=this.$el.find(".event-listing-filter-date-range").find("input"),i=this.$el.find(".date-filter-accordion").find("input"),o=this.model.get("sig");for(a=0;a<o.length;a++)if(t=o[a].toLowerCase(),e.hasOwnProperty(t)&&""!==e[t])if(m(window).width()<=767){var s=m(".date-filter-accordion").find("input").data("daterangepicker").startDate.format("MM/DD/YYYY"),l=m(".date-filter-accordion").find("input").data("daterangepicker").endDate.format("MM/DD/YYYY");""!==s&&this.handleDate(i,s,"start"),""!==l&&this.handleDate(i,l,"end")}else{s=m(".event-listing-filter-date-range").find("input").data("daterangepicker").startDate.format("MM/DD/YYYY"),l=m(".event-listing-filter-date-range").find("input").data("daterangepicker").endDate.format("MM/DD/YYYY");""!==s&&this.handleDate(n,s,"start"),""!==l&&this.handleDate(n,l,"end")}},handleDate:function(e,t,a){var n=this.getDefaultDates(),i=e.data("daterangepicker").startDate.format("MM/DD/YYYY"),o=e.data("daterangepicker").endDate.format("MM/DD/YYYY"),s=""!=i&&null!=i?i:n[0],l=""!=o&&null!=o?o:n[1],r=this.$el.find(".dates");"start"==a?0!==e.length&&d(s)!==t?(e.data("daterangepicker").setStartDate(t),r.addClass("has-active-facet")):""===t&&e.data("daterangepicker").setStartDate(null):0!==e.length&&d(l)!==t?(e.data("daterangepicker").setEndDate(t),r.addClass("has-active-facet")):""===t&&e.data("daterangepicker").setEndDate(null)}});return e.init=function(){if(!m("body").hasClass("on-page-editor")&&!t){w=XA.component.search.query,XA.component.search.url;var e=m(".custom-facet-date-range");_.each(e,function(e){var t=new a;new n({el:m(e),model:t}).render()}),t=!0}},e}(jQuery,document),XA.register("custom-facetDateRange",XA.component.search.facet.customdaterange),XA.component.search.facet.customdropdown=function(k,C){"use strict";var y,e={},t=!1,a=XA.component.search.baseModel.extend({defaults:{template:"<% _.forEach(results, function(result){var displayName =  result.Name.replace(/[0-9a-f]{32} /gi, ''); %><li><input type='checkbox' data-facetcount=\"<%= result.Count %>\" data-facetname=\"<%= result.Name !== '' ? replaceAll(encodeURIComponent(result.Name), '%2C', 'COMMA').replace(/'/g,'%27').replace(/&/g, '%26') : '_empty_' %>\" <%= result.Selected === true ? 'checked=\"checked\"' : '' %> class='checkbox sr-only' id=\"<%= result.Name !== '' ? replaceAll(encodeURIComponent(result.Name), '%2C', 'COMMA').replace(/'/g,'%27').replace(/&/g, '%26') : '_empty_' %>\" name=\"<%= result.Name !== '' ? replaceAll(encodeURIComponent(result.Name), '%2C', 'COMMA').replace(/'/g,'%27').replace(/&/g, '%26') : '_empty_' %>\"><label for=\"<%= result.Name !== '' ? replaceAll(encodeURIComponent(result.Name), '%2C', 'COMMA').replace(/'/g,'%27').replace(/&/g, '%26') : '_empty_' %>\"><span class='input-checkmark'></span><%= displayName !== '' ? displayName : emptyText %></label></li><%}); %>",mobileTemplate:"<% _.forEach(results, function(result){var displayName =  result.Name.replace(/[0-9a-f]{32} /gi, ''); %><li><input type='checkbox' data-facetcount=\"<%= result.Count %>\" data-facetname=\"<%= result.Name !== '' ? replaceAll(encodeURIComponent(result.Name), '%2C', 'COMMA').replace(/'/g,'%27').replace(/&/g, '%26') : '_empty_' %>\" <%= result.Selected === true ? 'checked=\"checked\"' : '' %> class='checkbox sr-only' id=\"<%= result.Name !== '' ? replaceAll(encodeURIComponent(result.Name), '%2C', 'COMMA').replace(/'/g,'%27').replace(/&/g, '%26') : '_empty_' %>\" name=\"<%= result.Name !== '' ? replaceAll(encodeURIComponent(result.Name), '%2C', 'COMMA').replace(/'/g,'%27').replace(/&/g, '%26') : '_empty_' %>\"><label for=\"<%= result.Name !== '' ? replaceAll(encodeURIComponent(result.Name), '%2C', 'COMMA').replace(/'/g,'%27').replace(/&/g, '%26') : '_empty_' %>\"><span class='input-checkmark'></span><%= displayName !== '' ? displayName : emptyText %></label></li><%}); %>",dataProperties:{},blockNextRequest:!1,resultData:{},optionSelected:!1,sig:[],facetName:""},initialize:function(){XA.component.search.vent.on("facet-data-loaded",this.processData.bind(this)),XA.component.search.vent.on("facet-data-filtered",this.processData.bind(this)),XA.component.search.vent.on("facet-data-partial-filtered",this.processData.bind(this)),XA.component.search.vent.on("hashChanged",this.updateComponent.bind(this))},toggleBlockRequests:function(){var e=this.get("blockNextRequest");this.set(this.get("blockNextRequest"),!e)},processData:function(e){var t,a,n,i,o=y.parseHashParameters(window.location.hash),s=this.get("sig"),l=this.get("dataProperties"),r=l.searchResultsSignature.split(","),d=l.sortOrder,c=l.f;for(i=0;i<r.length;i++)if(0<e.Facets.length&&e.Signature===r[i]||""===e.Signature||null===e.Signature){if(void 0===(a=_.find(e.Facets,function(e){return e.Key.toLowerCase()===c.toLowerCase()})))return;for(n=0;n<s.length;n++)if(!jQuery.isEmptyObject(_.pick(o,s[n]))&&""!==o[s[n]])for(var f=o[s[n]].split("||"),h=0;h<f.length;h++)if(0===(t=_.where(a.Values,{Name:f[h]})).length&&(t=_.where(a.Values,{Name:""})),1==t.length){var u=t[0].Name.replace(/'/g,"%27").replace(/&/g,"%26");k("[name*='"+replaceAll(u," ","%20")+"']").attr("checked",!0),k("[name*='"+replaceAll(u," ","%20")+"']").prop("checked",!0)}this.sortFacetArray(d,a.Values),this.set({resultData:a.Values})}},updateComponent:function(e){var t,a,n=this.get("sig");for(t=0;t<n.length;t++){var i=[];void 0!==e[a=n[t].toLowerCase()]&&""!==e[a]&&(i=e[a].split("||"));for(var o=0;o<i.length;o++)e.hasOwnProperty(a)&&""!==i[o]?this.set({optionSelected:!0}):this.set({optionSelected:!1})}}}),n=XA.component.search.baseView.extend({initialize:function(){var e=this.$el.data();this.properties=e.properties,this.model&&(this.model.set({dataProperties:this.properties}),this.model.set("sig",this.translateSignatures(this.properties.searchResultsSignature,this.properties.f))),this.model.on("change",this.render,this)},events:{},updateFacet:function(){var e=this.$el.find(".filter-list").find(".checkbox:checked"),t=this.model.get("sig");if(0==e.length)this.clearFilter();else if(k(this.$el).hasClass("custom-facet-dropdown")){for(var a=[],n=0;n<e.length;n++){var i=k(e[n]);if(-1==k.inArray(decodeURIComponent(i.data("facetname")),a)){a[n]=decodeURIComponent(i.data("facetname")),""===a[n]?this.model.set({optionSelected:!1}):this.model.set({optionSelected:!0});var o=a[n].replace(/'/g,"%27").replace(/&/g,"%26");k("[name*='"+replaceAll(o," ","%20")+"']").attr("checked",!0),k("[name*='"+replaceAll(o," ","%20")+"']").prop("checked",!0)}}y.updateHash(this.updateSignaturesHash(t,a.join("||"),{}))}else{var s=decodeURIComponent(e.data("facetname"));""===s?this.model.set({optionSelected:!1}):this.model.set({optionSelected:!0}),y.updateHash(this.updateSignaturesHash(t,s,{})),k("#"+a[n]).attr("checked",!0),k("#"+a[n]).prop("checked",!0)}},render:function(){function n(e,t){return e.Name.replace(/[0-9a-f]{32} /gi,"")<t.Name.replace(/[0-9a-f]{32} /gi,"")?-1:e.Name.replace(/[0-9a-f]{32} /gi,"")>t.Name.replace(/[0-9a-f]{32} /gi,"")?1:0}var e,t,i=this,a=i.model.get("resultData"),o=i.$el.find(".dd-result-count"),s=(i.$el.find("ul.filter-list").find(".checkbox:checked"),i.$el.find(".dd-title")),l=i.$el.find(".accordion-filter-title"),r=this.$el.find("ul.dropdown"),d=this.$el.find(".list-button-wrapper"),c=this.$el.find("ul.filter-list"),f=i.model.get("dataProperties").emptyValueText,h=_.template(i.model.get("template")),u=_.template(i.model.get("mobileTemplate")),p=y.parseHashParameters(window.location.hash),v=[];for(var m in p)for(var g=p[m].split("||"),w=0;w<g.length;w++)v.push(g[w]);var b=function(e,t){if(Array.isArray(e)){for(var a=0;a<e.length;a++)0<=t.indexOf(e[a].Name)?e[a].Selected=!0:e[a].Selected=!1;return e.sort(n)}return e}(a,v);e=h({results:b,emptyText:f}),t=u({results:b,emptyText:f}),this.manageVisibilityByData(this.$el,a),c.empty().append(t),r.empty().append(e),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),k(C).ajaxComplete(function(){var e=i.$el.find("ul.filter-list").find(".checkbox:checked"),t=i.$el.find(".accordion-filter-link-list").find(".checkbox:checked");if(0<e.length){s.html().endsWith(": ")||s.html(s.html()+": ");var a=e.length;0<l.length&&0<t.length&&(a=e.length/2,l.html(a+" Selected"),l.addClass("selected")),o.html(a)}else s.html().endsWith(": ")&&s.html(s.html().slice(0,-2)),o.html(""),l.html(l.data("name")),l.removeClass("selected")}),0<k(".filter-accordion__section").length&&k(".filter-accordion__section").on("click",".apply-btn",this.updateFacet.bind(i)),d.on("click",".dropdown-apply-btn",this.updateFacet.bind(i)),d.on("click",".dropdown-clear-btn",this.clearFilter.bind(i))},clearFilter:function(){var e=this.$el.find(".dd-result-count");(n=this.$el.find(".dd-title")).html().endsWith(": ")&&n.html(n.html().slice(0,-2)),e.html("");var t=this.$el.find("ul.dropdown"),a=this.model.get("sig");y.updateHash(this.updateSignaturesHash(a,"",{})),this.model.set({optionSelected:!1}),t.val(t.find("li:first").val());var n=this.$el.find(".dd-title");this.$el.find(".accordion-filter-title")}});return e.init=function(){if(!k("body").hasClass("on-page-editor")&&!t){y=XA.component.search.query,XA.component.search.url;var e=k(".custom-facet-dropdown");_.each(e,function(e){new n({el:k(e),model:new a})}),t=!0}},e.getFacetDataRequestInfo=function(){var e=k(".custom-facet-dropdown"),i=[];return _.each(e,function(e){var t,a=k(e).data().properties,n=a.searchResultsSignature.split(",");for(t=0;t<n.length;t++)i.push({signature:null===n[t]?"":n[t],facetName:a.f,endpoint:a.endpoint,filterWithoutMe:!0})}),i},e}(jQuery,document),XA.register("custom-dropdown",XA.component.search.facet.customdropdown),XA.component.search.customRadiusFilter=function(s){var t,n,i,a,e={};return n=Backbone.Model.extend({defaults:{properties:[],selected:{},sig:[]}}),i=XA.component.search.baseView.extend({initialize:function(){var e=_.map(this.$el.find(".wrapper-radius li[data-value][data-title]"),function(e){return s(e)}),t=this.$el.data("properties");_.each(e,function(e){e.addClass("radius-button")}),this.model.set({properties:t,selected:void 0}),this.model.bind("change",this.render,this),this.model.set("sig",this.translateSignatures(t.searchResultsSignature,t.f)),XA.component.search.vent.on("hashChanged",this.hashChanged.bind(this)),this.initializeEvent()},events:{},initializeEvent:function(){this.$el.find(".wrapper-radius li.radius-button").on("click",this.radiusClick)},render:function(){var e=this.$el.find(".wrapper-radius ul").find(".checkbox:checked"),t=this.$el.find(".dd-title-button"),a=t.data("name");a=e.length<=0?t.data("name"):e[0].name,t.html(a)},updateHash:function(e){var t=this.model.get("sig");void 0===e?a.updateHash(this.updateSignaturesHash(t,"",{})):a.updateHash(this.updateSignaturesHash(t,e,{}))},radiusClick:function(e){var t=s(e.currentTarget),a=s(t).parents(".custom-facet-radius-dropdown:first"),n=s(a).data("filterview"),i=s(t).data("value");return void 0!==t&&i==n.model.get("selected")?(s(t).find("input:checkbox").attr("checked",!1),n.model.set({selected:void 0})):(s(a).find("input:checkbox").attr("checked",!1),s(t).find("input:checkbox").attr("checked",!0),n.model.set({selected:i})),n.updateHash(n.model.get("selected")),e.stopPropagation(),!1},deselect:function(e){this.updateHash(""),this.model.set({selected:void 0})},hashChanged:function(e){var t,a,n,i,o=this.model.get("sig");for(i=0;i<o.length;i++)t=o[i].toLowerCase(),e.hasOwnProperty(t)&&(a=""===(a=e[t])?-1:a,(n=this.$el.find("[data-value='"+a+"']")).length&&1<=n.length?this.model.set({selected:s(n[0]).data("value")}):this.model.set({selected:void 0}))}}),t=function(e){var t=new n,a=new i({el:e[0],model:t});a.render(),e.addClass("initialized"),s(e[0]).data("filterview",a)},e.init=function(){if(!s("body").hasClass("on-page-editor")){a=XA.component.search.query,XA.component.search.url;var e=s(".custom-facet-radius-dropdown:not(.initialized)");_.each(e,function(e){t(s(e))})}},e}(jQuery,document),XA.register("customRadiusFilter",XA.component.search.customRadiusFilter),XA.ready(function(f){function a(e){this.dd=f(e),this.opts=this.dd.find("ul.dropdown > li"),this.placeholder=this.dd.find("span.dd-title"),this.button=this.dd.parent().find("button.activate"),this.val="",this.index=-1,this.initEvents()}function e(e){this.dd=e,this.opts=this.dd.find("ul.dropdown > fieldset > div.checkbox-new > input"),this.placeholder=this.dd.find("span.dd-title"),this.connectedSelect="",null!==this.dd.data("connectedselect")&&(this.connectedSelect=this.dd.data("connectedselect")),this.val=[],this.index=[],this.initEvents()}function n(e){this.dd=e,this.placeholder=this.dd.find("span.dd-title"),this.opts=this.dd.find("ul.dropdown.single > fieldset > div.checkbox-new > input"),this.connectedSelect="",null!==this.dd.data("connectedselect")&&(this.connectedSelect=this.dd.data("connectedselect")),this.isListBox=0<this.dd.find("ul.dropdown.listbox").length,this.val="",this.index=-1,this.initEvents()}function i(){function t(e){e.closest(".wrapper-dropdown").click(),e.closest(".wrapper-dropdown").removeClass("active"),e.closest(".wrapper-dropdown").find(".dd-title").focus()}new e(f(".dd"));f(".dds").each(function(e,t){new n(f(t))}),f(".wrapper-dropdown").on("click",function(){f(".wrapper-dropdown").not(f(this)).removeClass("active")}),f(document).on("keypress",function(e){13!=e.which&&32!=e.which||(0<f(".dd-title").length&&f(".dd-title").is(":focus")&&(e.preventDefault(),e.stopImmediatePropagation(),f(":focus").closest(".wrapper-dropdown").click()),0<f(".form-dropdown").length&&f(".form-dropdown").find("input").is(":focus")&&(e.preventDefault(),e.stopImmediatePropagation(),f(":focus").closest(".dropdown").hasClass("single")?(f(":focus").click(),f(":focus").closest(".form-dropdown").find(".dd-title").focus()):(f(":focus").click(),f(":focus").closest("li").click(),f(":focus").closest(".wrapper-dropdown").addClass("active"))))}),f(document).keydown(function(e){9==e.which&&!e.shiftKey&&0<f(".wrapper-dropdown").length?f(".last-form-dropdown-item").is(":focus")&&0<f(":focus").closest(".wrapper-dropdown").length&&f(":focus").closest(".wrapper-dropdown").hasClass("active")&&(e.preventDefault(),t(f(":focus"))):9==e.which&&e.shiftKey&&0<f(".wrapper-dropdown").length?f(".first-form-dropdown-item").is(":focus")&&0<f(":focus").closest(".wrapper-dropdown").length&&f(":focus").closest(".wrapper-dropdown").hasClass("active")&&(e.preventDefault(),t(f(":focus"))):38==e.which&&0<f(".wrapper-dropdown").length?f(".first-form-dropdown-item").is(":focus")?0<f(":focus").closest(".wrapper-dropdown").length&&f(":focus").closest(".wrapper-dropdown").hasClass("active")&&(e.preventDefault(),t(f(":focus"))):f(".new-check").is(":focus")&&0<f(":focus").closest(".wrapper-dropdown").length&&f(":focus").closest(".wrapper-dropdown").hasClass("active")&&(e.preventDefault(),f(":focus").parent().prev().find("input.new-check").focus()):40==e.which&&0<f(".wrapper-dropdown").length&&(f(".last-form-dropdown-item").is(":focus")?0<f(":focus").closest(".wrapper-dropdown").length&&f(":focus").closest(".wrapper-dropdown").hasClass("active")&&(e.preventDefault(),t(f(":focus"))):f(".dd-title").is(":focus")?0<f(":focus").closest(".wrapper-dropdown").length&&f(":focus").closest(".wrapper-dropdown").hasClass("active")&&(e.preventDefault(),f(":focus").closest(".wrapper-dropdown").find(".first-form-dropdown-item").focus()):f(".new-check").is(":focus")&&0<f(":focus").closest(".wrapper-dropdown").length&&f(":focus").closest(".wrapper-dropdown").hasClass("active")&&(e.preventDefault(),f(":focus").parent().next().find("input.new-check").focus()))}),f(document).keyup(function(e){27!=e.keyCode&&"Escape"!==e.key||0<f(".wrapper-dropdown").length&&(f(".new-check").is(":focus")||f(".dd-title").is(":focus"))&&0<f(":focus").closest(".wrapper-dropdown").length&&(e.preventDefault(),f(":focus").closest(".wrapper-dropdown").click(),f(":focus").closest(".wrapper-dropdown").removeClass("active"),f(":focus").closest(".wrapper-dropdown").find(".dd-title").focus())}),f(".dd-title").focus(function(){f(this).parent("div").css("border-color","#142d3e")}),f(".dd-title").blur(function(){f(this).parent("div").css("border-color","")}),f(document).click(function(){f(".wrapper-dropdown").removeClass("active").trigger("remote-close")})}function o(){f(".sitecore-form form").find("select").each(function(e,t){var a=f(this);if(null==f(a).data("dropdownduplication")){var n=a.find("option"),i=f.map(n,function(e){return{value:f(e).val(),isSelected:f(e).prop("selected")?"checked":""}}),o="",s="dd",l="",r='<span class="input-checkmark"></span>';f(a).prop("multiple")?l="listbox":(s="dds",l="single",r="");var d='<div class="wrapper-drop form-dropdown"><span class="wrapper-drop-top-title"></span><div class="wrapper-dropdown '+s+'" data-connectedselect="'+f(a).attr("id")+'"><span tabindex="0" class="dd-title"></span><ul class="dropdown '+l+'">';i.map(function(e,t){var a='<li data-index="'+t+'">';a+="single"===l?'<input type="checkbox" aria-hidden="true" id="'+e.value+'" name="'+e.value+'" value="'+e.value+'" '+e.isSelected+">":'<input type="checkbox" id="'+e.value+'" name="'+e.value+'" value="'+e.value+'" '+e.isSelected+">",a+='<label for="'+e.value+'">'+r+e.value+"</label>",0<e.value.length&&(o+=a)});var c=d+o;a.before(c),f(a).addClass("restyled").data("dropdownduplication",!0)}})}function s(){var e=f(".sitecore-form form"),t=e.find('input[type="checkbox"]');e.find("input[type='radio']").each(function(e,t){var a=f(t).parent(),n=a.text().trim();""===n&&(n=f(t).val()),f(t).attr("id","radioId-"+e+"["+n+"]");var i=f(t).attr("id"),o=f(t).attr("data-sc-field-key")+"-FieldSet",s='<label class="new-radio-label new-check-label" for="'+i+'"><span class="input-checkmark"></span>'+n+"</label>";if(f(t).removeClass().addClass("new-radio"),1==f(t).prop("checked")&&f(t).addClass("active"),f("fieldset[name ='"+o+"']").length<=0){a.wrap("<fieldset name='"+o+"'/>");var l=null==f("fieldset[name = '"+o+"']").prev().text()?f("input[name = '"+i+"']").first().prev().text():f("fieldset[name = '"+o+"']").prev().text();a.closest("fieldset").prepend("<legend class='sr-only'>"+l+"</legend>")}else a.detach().appendTo("fieldset[name ='"+o+"']");a.wrap('<div class="checkbox-new">');var r=f(this);a.before(r),f(a).hide(),f(t).addClass("sr-only"),f(this).after(s)}),t.each(function(e,t){var a=f(t).parent(),n=a.text().trim();""===n&&(n=f(t).val()),f(t).attr("id","checkboxId-"+e+"["+n+"]");var i=f(t).attr("id"),o="";0<f(a).closest(".wrapper-dropdown").length?o=f(a).closest(".wrapper-dropdown").attr("data-connectedselect")+"-FieldSet":null!=f(t).attr("data-sc-field-key")&&""!=f(t).attr("data-sc-field-key")&&(o=f(t).attr("data-sc-field-key")+"-FieldSet");var s="",l=!1;if(0<f(a).closest(".wrapper-dropdown").length){var r=f(a).closest(".wrapper-dropdown").attr("data-connectedselect");l=f(a).closest(".wrapper-dropdown").hasClass("dds"),s=f("label[for = '"+r+"']").text(),f(a).closest(".wrapper-dropdown").find(".dd-title").attr("aria-label",s+" dropdown")}else if(null!=f(t).attr("data-sc-field-key")&&""!=f(t).attr("data-sc-field-key")){r=f(t).attr("name");s=f("input[name = '"+r+"']:not([type=checkbox])").prev().text()}""==s&&(s="Legend for Checkbox List #"+(e+1)),s+=":";var d='<label class="new-check-label" for="'+i+'"><span class="input-checkmark"></span>'+n+"</label>";f(t).removeClass().addClass("new-check last-form-dropdown-item first-form-dropdown-item"),1==f(t).prop("checked")&&f(t).addClass("active"),f("fieldset[name ='"+o+"']").length<=0?(a.wrap("<fieldset name='"+o+"'/>"),a.closest("fieldset").prepend("<legend class='sr-only'>"+s+"</legend>")):a.detach().appendTo("fieldset[name ='"+o+"']"),l?a.wrap('<div class="checkbox-new" role="option">'):a.wrap('<div class="checkbox-new">');var c=f(this);a.before(c),f(a).hide(),f(t).addClass("sr-only"),f(this).after(d)}),f(".form-dropdown").each(function(e){f(this).find("input.new-check").not(":last").removeClass("last-form-dropdown-item"),f(this).find("input.new-check").not(":first").removeClass("first-form-dropdown-item")}),f(".new-check").on("click",function(e){f(this).toggleClass("active")})}function l(){f(".mobile-filter-banner").on("click",function(){f("ul.dropdown").toggleClass("active"),f(".event-listing-filter-selects").toggleClass("active"),f("body").addClass("scroll-lock"),0<f("#MicrosoftNav").length&&f("#MicrosoftNav").hide()}),f(document).on("keypress",function(e){(13==e.which||32==e.which&&0<f(".mobile-filter-banner").length)&&f(".mobile-filter-banner").is(":focus")&&(e.preventDefault(),e.stopImmediatePropagation(),f(".mobile-filter-banner").click(),f(".mobile-accordion-close").focus())})}function t(){f("ul.dropdown").toggleClass("active"),f(".event-listing-filter-selects").toggleClass("active"),0<f(".accordion-filter").length&&(f(".accordion-filter-heading").addClass("collapsed"),f(".accordion-filter ul").removeClass("show"),f(".accordion-filter ul").addClass("collapse")),0<f(".date-filter-accordion").length&&(f(".mobile-date-filter").removeClass("active"),f(".date-filter-accordion-item").removeClass("active")),f("body").removeClass("scroll-lock"),0<f("#MicrosoftNav").length&&f("#MicrosoftNav").show()}function r(){0<f(".accordion-filter-link-list").length&&f(".accordion-filter-link-list").on("click","li",function(){var e=f(this).find(".checkbox");e.is(":checked")?(f("[name*='"+e.attr("name")+"']").attr("checked",!1),f("[name*='"+e.attr("name")+"']").prop("checked",!1)):(f("[name*='"+e.attr("name")+"']").attr("checked",!0),f("[name*='"+e.attr("name")+"']").prop("checked",!0))}),0<f(".custom-dropdown").length&&f(".custom-dropdown").on("click","li",function(){var e=f(this).find(".checkbox");e.is(":checked")?(f("[name*='"+e.attr("name")+"']").attr("checked",!1),f("[name*='"+e.attr("name")+"']").prop("checked",!1)):(f("[name*='"+e.attr("name")+"']").attr("checked",!0),f("[name*='"+e.attr("name")+"']").prop("checked",!0))})}function d(){0<f(".date-filter-accordion").length&&(f(".date-filter-accordion").on("click",function(){f(".mobile-date-filter").toggleClass("active"),f(".date-filter-accordion-item").toggleClass("active")}),f(".date-filter-accordion").find(".accordion-filter-buttons").on("click",function(){f(".date-filter-accordion").find("input").focus()}))}function c(){var t=0;f(".date-filter-accordion").on("focus",function(){t=parseInt(f(".mobile-date-filter").css("top"))}),f(".dropdown-accordion").on("focus",function(){f(".date-filter-accordion ul").hasClass("show")&&(f(".mobile-date-filter").removeClass("active"),f(".date-filter-accordion-item").removeClass("active"),f(".date-filter-accordion .accordion-filter-heading").addClass("collapsed"),f(".date-filter-accordion ul").removeClass("show"),f(".date-filter-accordion ul").addClass("collapse"))}),f(".event-listing-filter-selects").on("scroll",function(){if(f(".date-filter-accordion ul").hasClass("show")){var e=f(".event-listing-filter-selects").scrollTop();f(".mobile-date-filter").css("top",t-e)}})}if(f(".dd-title-button").focus(function(){f(this).parent("div").addClass("focused")}),f(".dd-title-button").blur(function(){f(this).parent("div").removeClass("focused")}),f(".event-listing-filter-date-range").find("input").focus(function(){f(this).parent("div").addClass("active")}),f(".event-listing-filter-date-range").find("input").blur(function(){f(this).parent("div").removeClass("active")}),f(".wrapper-dropdown").find("label").focus(function(){f(this).parent("li").css("border-color","#142d3e !important")}),f(".wrapper-dropdown").find("label").blur(function(){f(this).parent("li").css("border-color","")}),!XA.hasPageModes()&&0<f(".wrapper-quicklist").length&&(a.prototype={initEvents:function(){var t=this;t.dd.on("click",function(e){e.stopPropagation(),f(this).toggleClass("active")}),t.opts.on("click",function(){var e=f(this);t.text=e.text(),t.val=e.attr("value"),t.index=e.index(),f(t.placeholder).text(t.text)}),t.button.on("click",function(){t.showSelection()})},showSelection:function(){f(".quick-list-container").hide(),f(".quick-list-container[relatedid='"+this.val+"']").show()}},f(".wrapper-quicklist").find(".wrapper-dropdown.dds").each(function(e,t){new a(f(t))}),f(".wrapper-quicklist .wrapper-dropdown").on("click",function(){f(".wrapper-quicklist .wrapper-dropdown").not(f(this)).removeClass("active")})),0<f(".wrapper-radius").length||0<f(".wrapper-drop").length||0<f(".sitecore-form").length||0<f(".accordion-drop").length){if(e.prototype={initEvents:function(){var t=this;t.dd.on("click",function(e){e.stopPropagation(),f(this).hasClass("event-listing-filter-date-range")||f(this).toggleClass("active"),t.refreshSelect()}),t.dd.on("remote-close",function(){t.refreshSelect()})},refreshSelect:function(){var a=this,n=0;a.opts.is(":focus")?f(a.dd).addClass("active"):f(a.dd).is(":focus")&&(f(a.placeholder).is(":focus")||f(a.dd).removeClass("active")),""!==a.connectedSelect&&f(a.dd).find("input[type='checkbox']").each(function(e,t){f(t).prop("checked")?(f(t).addClass("active"),f("#"+a.connectedSelect).find("option:eq("+e+")").prop("selected",!0),n++):(f(t).removeClass("active"),f("#"+a.connectedSelect).find("option:eq("+e+")").prop("selected",!1)),f(a.dd).find("ul").hasClass("listbox")&&(0<n?f(a.placeholder).html(n+" Option(s) Selected"):f(a.placeholder).html(""))})}},n.prototype={initEvents:function(){var a=this;a.dd.on("click",function(e){e.stopPropagation(),a.refreshSelect(),f(this).hasClass("event-listing-filter-date-range")||f(this).toggleClass("active")}),a.opts.on("click",function(e){var t=f(this).siblings("li");""!==a.connectedSelect&&(f("#"+a.connectedSelect).find("option:eq("+f(t).data("index")+")").prop("selected")?f("#"+a.connectedSelect).find("option").prop("selected",!1):(f("#"+a.connectedSelect).find("option:eq("+f(t).data("index")+")").prop("selected",!0),f("#"+a.connectedSelect).find("option:eq("+f(t).data("index")+")").siblings().prop("selected",!1))),a.dd.removeClass("active"),a.placeholder.focus(),a.refreshSelect(),e.stopPropagation()}),a.dd.on("remote-close",function(){a.refreshSelect()}),a.refreshSelect()},refreshSelect:function(){var a=this;if(""!==a.connectedSelect){f(a.placeholder).html(""),a.text="",a.val="",a.index=-1;var e=f("#"+a.connectedSelect).find("option").first();null!=e&&""!=e.val()&&null!=e.val()&&(a.isListBox=!0),f("#"+a.connectedSelect).find("option").each(function(e,t){f(t).prop("selected")&&(f(a.placeholder).html(f(t).text()),a.text=f(t).text(),a.val=f(t).attr("value"),a.isListBox?a.index=f(t).index():a.index=f(t).index()-1)}),f(a.opts).each(function(e,t){e==a.index?f(t).addClass("active"):f(t).removeClass("active")})}},getValue:function(){return this.val},getIndex:function(){return this.index}},!XA.hasPageModes()){if(0<f(".sitecore-form form").length){var h=f(".sitecore-form form").parent()[0];new MutationObserver(function(e){e.forEach(function(e){var t=e.addedNodes;null!==t&&0<t.length&&(o(),s(),d(),r(),l(),i(),c(),function(e){for(var t=0;t<e.length;t++)if("form"===e[t].nodeName.toLowerCase()){var a=f(e[t]).offset();f("html,body").animate({scrollTop:a.top},500),0<f("div[role='alert']").length&&(f("div[role='alert']").attr("tabindex","0"),f("div[role='alert']").focus())}}(t))})}).observe(h,{attributes:!0,childList:!0,characterData:!0})}o(),s(),d(),r(),l(),i(),c(),0<f(".mobile-accordion-close").length&&f(".mobile-accordion-close").on("click",t),0<f(".accordion-filter-buttons .apply-btn").length&&f(".accordion-filter-buttons .apply-btn").on("click",t)}f(document).ajaxStop(function(e,t,a){!function(){if(0<f(".news-listing__mobile-filters").length&&0<f(".filter-list").length){var e=0,t=f(".news-listing__mobile-filters"),a=f(".event-listing-filter-mobile-banner");0<f(".accordion-filter-link-list").length&&(f(".accordion-filter-link-list").each(function(){0<f(this).find(".checkbox:checked").length&&(e+=1)}),t.html(e+" Filters Selected"),a.addClass("selected")),0==e&&(t.html(t.data("name")),a.removeClass("selected")),f(window).width()<=767&&0<f(".date-filter-accordion").length&&f(".date-filter-accordion").find("input").data("daterangepicker").endDate.isValid()&&(e+=1,t.html(e+" Filters Selected"),a.addClass("selected"))}}()}),f(document).ajaxComplete(function(e,t,a){if(0<window.location.hash.length){var n=window.location.hash.split("%2C").join(",").split("=").join(",").split("&").join(",").split(",");if(1<n.length)for(var i=0;i<n.length;i++)3<n[i].length&&"0"!=n[i]&&f("[name*='"+n[i]+"']").attr("checked",!0)}})}(!XA.hasPageModes()&&0<f(".custom-facet-dropdown").length||0<f(".custom-facet-radius-dropdown").length)&&(f(document).keydown(function(e){var t=e.keyCode||e.which;32!=t&&13!=t||!f(".custom-facet-dropdown").find("input").is(":focus")||(e.stopPropagation(),e.preventDefault(),f(":focus").closest("li").click(),f(":focus").closest(".wrapper-dropdown").hasClass("active")||f(":focus").closest(".wrapper-dropdown").addClass("active"))}),f(document).keydown(function(e){var t=e.keyCode||e.which;32!=t&&13!=t||!f(".custom-facet-radius-dropdown").find("input").is(":focus")||(e.stopPropagation(),e.preventDefault(),f(":focus").closest("li").click(),f(":focus").closest(".wrapper-dropdown").removeClass("active"),f(":focus").closest(".wrapper-dropdown").find(".dd-title-button").focus())}),f(".custom-facet-radius-dropdown").find("li").on("click",function(){f(".custom-facet-radius-dropdown").find(".wrapper-dropdown").removeClass("active"),f(".custom-facet-radius-dropdown").find(".wrapper-dropdown").find(".dd-title-button").focus()}),f(".event-listing-filter-date-range").on("mousedown",function(e){f(this).find("input").is(":focus")||(e.stopPropagation(),e.preventDefault(),f(this).find("input").focus())})),!XA.hasPageModes()&&0<f(".add-to-calendar-component").length&&f(document).keydown(function(e){var t=e.keyCode||e.which;32!=t&&13!=t||!f(".add-to-calendar-component").find("label").is(":focus")||(e.stopPropagation(),e.preventDefault(),f(".add-to-calendar-component").find("label").click())})}),window.setSocial=function(){},XA.ready(function(t){0<t(".instagram-post-container").length&&0<t(".instagram-post-container").attr("data-postid").length&&t(".instagram-post-container").each(function(){var a,e;a=t(this),e=(e=t(this).attr("data-postid")).trim().replace(/<(\w+)[^>]*>.*<\/\1>/gi,""),t(function(){t.ajax({type:"get",url:"https://api.instagram.com/oembed/?url=https://www.instagram.com/p/"+e,success:function(e){a.html(e.html)},error:function(e,t){a.html("<div class='sc-rendering-error col-12'> No instagram post was found for the given post ID. This variant needs a valid Instagram post ID to render.</div>")}})})}),0<t(".facebook-feed-container").length&&t(".facebook-feed-container").first().prepend("<div id='fb-root'></div><script async defer crossorigin='anonymous' src='https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v7.0' nonce='nSCaZmTX'><\/script>")}),XA.ready(function(t){function a(e){window.open(e,"_newtab"),window.location.replace("http://google.com")}XA.hasPageModes()||(t("#get-away").on("click",function(e){e.preventDefault(),a(this.href)}),t(document).keyup(function(e){0<t("#get-away").length&&(27==e.keyCode?a(t("#get-away").href):"Escape"===e.key&&a(t("#get-away").href))}))}),window.accordionFAQSearchFilter=function(){},window.globalFAQSearchFilter=function(){},XA.ready(function(n){function i(e,t,a){e=e.trim().toLowerCase(),n(t).find(a).each(function(){e.length<=0||0<=n(this).find(".field-heading").text().toLowerCase().indexOf(e)||0<=n(this).find(".field-content").text().toLowerCase().indexOf(e)?n(this).show():n(this).hide()})}var e;n(document).on("keypress",function(e){13==e.which&&0<n(".inpage-search__section-search").length&&i(n(".inpage-search__section-search").val(),".accordion","li.item"),13==e.which&&0<n(".search-box").length&&0<n(".faqResult").length&&i(n(".search-box-input.tt-input").val(),".search-result-list",".faqResult")}),0<n(".faq-category-search").length&&n(".faq-category-search").on("click",function(){i(n(".inpage-search__section-search").val(),".accordion","li.item")}),0<(e=n(".accordion").find(".active")).length&&n("html,body").animate({scrollTop:e.offset().top},1e3),n(document).ajaxComplete(function(e,t,a){0<n(".faqResult").length&&(n(".search-box").find(".search-box-button").on("click",function(){i(n(".search-box-input.tt-input").val(),".search-result-list",".faqResult")}),i(n(".search-box-input.tt-input").val().trim().toLowerCase(),".search-result-list",".faqResult")),n(document).on("keypress",function(e){13==e.which&&0<n(".faqResult").length&&i(n(".search-box-input.tt-input").val(),".search-result-list",".faqResult")})})}),window.toggleFooterList=function(){},window.expandFooterList=function(){},window.closeFooterList=function(){},XA.ready(function(a){function n(e){a(e).addClass("collapsed"),a(e).parent().find("ul").addClass("collapse"),a(e).parent().find("ul").removeClass("show")}function e(e){var t;window.innerWidth<=768&&(a(e).hasClass("collapsed")?(a(t=e).removeClass("collapsed"),a(t).parent().find("ul").removeClass("collapse"),a(t).parent().find("ul").addClass("show")):n(e))}0<a(".footer__section-link-heading").length&&(a(".footer__section-link-heading").on("click",function(){e(this)}),a(".footer__section-link-heading").each(function(){n(this)})),0<a(".accordion-filter-heading").length&&(a(".accordion-filter-heading").on("click",function(){e(this)}),a(".accordion-filter-heading").each(function(){n(this)}))}),window.setSearch=function(){},window.expandSearch=function(){},window.retrieveJSON=function(){},XA.ready(function(d){function e(){""==(c=d("#headerCTX").text())&&(c="__all__"),function(){if(!XA.hasPageModes()){var t="";0<d(".local-site-terms").length?d(".local-site-terms").each(function(){var e=d(this).text();0<t.length&&(t+=","),t+=e}):d(".shared-site-terms").each(function(){var e=d(this).text();0<t.length&&(t+=","),t+=e}),d(function(){d.ajax({type:"get",url:"/api/headersearch/"+t,contentType:"application/json; charset=utf-8",success:function(e){f=e},error:function(e,t){console.log("error retrieving search terms")}})})}}()}function a(){d(".header__section-search-container").hasClass("active")?(d(".header__section-search-container").hide(),d(".search-icon").show(),d(".plain-html").show(),d("#MicrosoftNav").show(),d(".bm_bottomLeftOverlay").show(),d(".bm_bottomRightOverlay").show(),d(".modal-backdrop").remove()):(d("main").removeClass("hide-mobile"),d("footer").removeClass("hide-mobile"),d("#header").find(".toggle").find(".toggle-content").removeAttr("open"),d(".search-icon").hide(),d(".plain-html").hide(),d("#MicrosoftNav").hide(),d(".bm_bottomLeftOverlay").hide(),d(".bm_bottomRightOverlay").hide(),d(".modal-backdrop").length<=0&&d("body").append('<div class="modal-backdrop fade in searched"></div>'),d(".header__section-search-container").show(),d(".header-section-search-container-").find("input").trigger("focus")),d(".header__section-search-container").toggleClass("active"),d(".header__section-search-icon").toggleClass("active")}function n(e,t,a){d(e).each(function(){d(this).attr(t,a)})}function i(){var t,a,e;0<d("input.tt-hint").length&&(d("input.tt-hint").each(function(e,t){var a=d(t).siblings("input.tt-input").attr("placeholder");0==a.length&&(a="Search"),d(t).attr("aria-label",a)}),d("input.tt-hint").attr("aria-hidden","true")),0<d("div.tt-menu").length&&(t="aria-label",a="menu list ",d("div.tt-menu").each(function(){var e=0;d(this).attr(t,a+e),e++})),0<d("input.tt-input").length&&(e="role",d("input.tt-input").each(function(){d(this).removeAttr(e)})),0<d(".header__skip").length&&n(".header__skip","tabindex","1"),0<d(".add-to-calendar-label").length&&n(".add-to-calendar-label","tabindex","0"),0<d(".breadcrumb").length&&(n(".breadcrumb > .component-content > nav","aria-label","breadcrumb navigation"),n(".breadcrumb > .component-content > nav","aria-labelledby","breadcrumb navigation")),0<d(".accordion").length&&d(".accordion .toggle-content").each(function(){0==d(this).children().length||0<d(this).find(".field-content").length&&""==d(this).find(".field-content").html().trim()?d(this).addClass("empty"):0<d(this).find(".rich-text").find(".col-12").length&&""==d(this).find(".rich-text").find(".col-12").html().trim()&&d(this).addClass("empty")}),d("#missingCredential").hide()}var c,f;d(".header__section-search-wrapper").on("click",function(){a()}),d(".header__section-search-container").hide(),d(".header-section-search-container-").find("input").bind("paste keyup",function(){""!=d(this).val()&&2<d(this).val().length?function(e){var t=[],a="";0<f.indexOf("<br/>")&&(a=f.split("<br/>")),f.indexOf("\n")&&(a=f.split("\n"));for(var n=0;n<a.length;n++)if(0<=a[n].toLowerCase().indexOf(e)){for(var i=0,o="",s=0;s<a[n].length;s++)a[n].charAt(s).toLowerCase()==e.charAt(i)?(i++,o+=a[n].charAt(s)):i!=e.length&&(i=0,o="");var l=new RegExp(o,"gi"),r="https://search.michigan.gov/AppBuilder/search?utf8=%E2%9C%93&id=&type=&ctx="+c+"&q="+a[n].replace(" ","+")+"&button=search";t.push("<li id='"+n+"'><a href='"+r+"'>"+a[n].replace(l,function(e){return"<b>"+e+"</b>"})+"</a></li>")}d(".search-terms-list").empty(),d(".search-terms-list").append(t),0<d(".search-terms-list").children().length?d(".search-terms-container").show():(d(".search-terms-container").show(),d(".search-terms-list").append("<li><a>No suggestions match, please select enter to perform a search.</a></li>"))}(d(this).val()):d(".search-terms-container").hide()}),d("#header").find("a.navigation-toggle-header").on("click",function(){var e;null==d("#header").find(".toggle").find(".toggle-content").attr("open")?(d("main").removeClass("hide-mobile"),d("footer").removeClass("hide-mobile")):"open"==d("#header").find(".toggle").find(".toggle-content").attr("open")?(d("main").addClass("hide-mobile"),d("footer").addClass("hide-mobile"),d(".header__section-search-container").removeClass("active"),d(".header__section-search-icon").removeClass("active"),d(".header__section-search-container").hide(),d(".modal-backdrop").remove()):(d("main").removeClass("hide-mobile"),d("footer").removeClass("hide-mobile")),void 0===e?d("#header").find(".navigation-toggle-content").toggle():!0===e?d("#header").find(".navigation-toggle-content").show():d("#header").find(".navigation-toggle-content").hide(),"true"==d(this).attr("aria-expanded")?d(this).removeClass("open-toggle").attr("aria-expanded","false"):(d(this).addClass("open-toggle").attr("aria-expanded","true"),d("#menuAmobile").find("li.level1:first a.nav-link").focus())}),e(),d(document).ajaxComplete(function(e,t,a){i(),XA.component.search.vent.on("results-loaded",i)}),d(document).keydown(function(e){var t=e.keyCode||e.which;32!=t&&13!=t||!d(".header__section-search-wrapper").is(":focus")?32!=t&&13!=t||!d("#header").find("a.navigation-toggle-header").is(":focus")?9===t&&e.shiftKey&&d(".header-section-search-container-").find("input").is(":focus")?(e.preventDefault(),a(),d(".header__section-search-wrapper").focus()):13==t&&d(".header-section-search-container-").find("input").is(":focus")?function(e){e=e.toLowerCase();var t="https://search.michigan.gov/AppBuilder/search?utf8=%E2%9C%93&id=&type=&ctx="+c+"&q="+e.trim().replace(" ","+")+"&button=search";window.location.href=t}(d(".header-section-search-container-").find("input").val()):32!=t&&13!=t||!d(".tabs-heading > li").is(":focus")||(e.preventDefault(),d(document.activeElement).click()):(e.preventDefault(),e.stopImmediatePropagation(),d("#header").find("a.navigation-toggle-header").trigger("click")):a(),40===t?d(".header-section-search-container-").find("input").is(":focus")?(e.preventDefault(),d(".search-terms-list").find("li").first().find("a").focus()):d(".search-terms-container").find("li").find("a").is(":focus")&&(e.preventDefault(),d(":focus").parent("li").next().find("a").focus()):38===t&&(d(".search-terms-list").find("li").first().find("a").is(":focus")?(e.preventDefault(),d(".header-section-search-container-").find("input").focus()):d(".search-terms-container").find("li").find("a").is(":focus")&&(e.preventDefault(),d(":focus").parent("li").prev().find("a").focus()))});var o=null;0<d(".page-hero-video-hero").length&&function(a){function e(){function e(){o.loadVideoById(i[0]),o.mute()}function t(e){0===e.data?(d("#tv").removeClass("active"),o.loadVideoById(i[0])):1===e.data&&d("#tv").addClass("active")}window.YT.ready(function(){o=new window.YT.Player("tv",{events:{onReady:e,onStateChange:t},playerVars:{playlist:d("#promo-movie-id").text(),loop:1,playsinline:1,autoplay:a,controls:0,showinfo:0,enablejsapi:0,disablekb:1,autohide:1,modestbranding:0,rel:0,version:3,wmode:"opaque",origin:"https://dev.michigan.local"}})}),d(window).on("load resize",function(){var e,t;e=d(window).width()+200,t=d(window).height()+200,16/9<e/t?o.setSize(e,e/16*9):o.setSize(t/9*16,t),d(".tv .screen").css({left:"0px"}),d(".tv .screen").attr("tabindex","-1")}),d("#videoHeroButton").on("click",function(){d("#videoHeroButton").hasClass("active")?(o.playVideo(),d("#videoHeroButton").removeClass("active")):(o.pauseVideo(),d("#videoHeroButton").addClass("active"))}),!window.MSStream&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&o.attr("allow","playsinline")}var t=document.createElement("script");t.src="https://www.youtube.com/player_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);var i=[{videoId:d("#promo-movie-id").text(),startSeconds:0,endSeconds:1e3,suggestedQuality:"hd720"}];d(".intro em:last-of-type").html(i.length),d(document).ready(function(){d.getScript("https://www.youtube.com/iframe_api",function(){e()})})}(1)}),XA.ready(function(e){var t,a;e(".important-information-box__section")&&(XA.hasPageModes()||(t=e(".important-information-box__section .close-button"),a=e(".important-information-box__section"),t.on("click",function(){a.hide()})))}),window.retrieveXML=function(){},window.jobSearchQueryBuild=function(){},XA.ready(function(i){function t(){var e=/<(\w+)[^>]*>.*<\/\1>/gi,t=i("#job-title").val().trim().replace(e,""),a=i("#job-keyword").val().trim().replace(e,""),n="https://jobs.mitalent.org/job-seeker/jobsearch-results?";0<t.length&&(n+="job_title="+t+"&"),0<a.length&&(n+="job_keywords="+a+"&"),n+="job_time_frame=30",window.open(n,"_blank")}function a(e){var n=[];e.find("item").each(function(e,t){var a=i(this).find("description").text();a=i(a).text().slice(0,100),n.push("<div class='col-12 col-md-6 col-lg-4 job-listing'><div class='com-wrapper'><h3><a class='off-domain-link' href='"+i(this).find("link").text()+"' target='_blank' rel='noopener noreferrer'>"+i(this).find("title").text()+o+"</a></h3><p>"+i(this).find("companyName").text()+"</p><p>Posted: "+i(this).find("pubDate").text().split(" ")[0]+"</p><br><p>"+a+"...</p></div></div>")}),i("[name='job-list-row1']").empty();for(var t=0;t<n.length;t++)i("[name='job-list-row1']").append(n[t])}function e(){if(!XA.hasPageModes()){i("[name='job-list-row1']").html("<div class='col'>Loading...</div>");var e=i("#jobListingsXML").attr("data-sitename"),t=i("#jobListingsXML").attr("data-offsiteIcon");null!=t&&(o=t),i(function(){i.ajax({type:"get",url:"/api/loadxml/"+e,contentType:"application/json; charset=utf-8",success:function(e){0<e.indexOf("?xml")?a(i(i.parseXML(e))):i("[name='job-list-row1']").html("<div class='col'>No results.</div>")},error:function(e,t){console.log("error retrieving xml")}})})}}var o="";XA.hasPageModes()||(0<i(".open-jobs__section").length&&e(),0<i(".find-jobs__section").length&&(i(".find-jobs__section").find(".find-jobs-link").on("click",function(e){e.preventDefault(),t()}),i(".find-jobs__section").find("input").on("keypress",function(e){13==e.which&&(e.preventDefault(),t())})))}),XA.ready(function(e){var t="";XA.hasPageModes()||(e(".link-list-dropdown-item").on("click",function(){t=e(this).find("a").data("link")}),e(".link-list-dropdown-button").on("click",function(){""!=t&&window.open(t,"_blank")}))}),XA.ready(function(i){function e(){var a="";if(r.forEach(function(e){var t=e.label.split(",");e.label==i(".location-search-box-input").val()?a=e:t[0].toLowerCase()===d.toLowerCase()&&(a=e)}),""!=a)i(n).val(a.label),i.get({url:l+"&magicKey="+a.id,dataType:"json",success:function(e){var t=e.candidates[0].location.y+"|"+e.candidates[0].location.x,a=XA.component.search.query,n=a.parseHashParameters(window.location.hash);n.g=t,0<i(".auto-sort-by-distance").length&&(n.o="Distance,Ascending"),a.updateHash(n)}});else{var e=XA.component.search.query,t=e.parseHashParameters(window.location.hash);t.g="0|0",0<i(".auto-sort-by-distance").length&&(t.o="Distance,Ascending"),e.updateHash(t),i(n).val(i(n).val()),i(".ui-autocomplete").css("display","none")}}var n=".location-detector .location-search-box-input[name='textBoxLocationSearch']";if(0<i(n).length){var t={countryCode:"USA",maxSuggestions:10,category:"Postal,City,Subregion",searchExtent:"%7B%22xmin%22:-90.41828943766775,%22ymin%22:41.69612557629312,%22xmax%22:-82.41347794823321,%22ymax%22:48.26269236532789,%22spatialReference%22:%7B%22wkid%22:4326%7D%7D",f:"json"};i(n).parent().addClass("ui-front");var a=[];for(var o in t)a.push(o+"="+t[o]);var s="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/suggest?"+a.join("&"),l="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates?&maxLocations=10&outFields=longLabel,location,type,city,region,regionAbbr,postal,country,subregion&f=pjson",r=[],d="";i(document).keydown(function(e){var t=e.keyCode||e.which;!i(n).is(":focus")||40!=t&&38!=t||(i(".ui-widget-content").find("li").attr("style",""),i(".ui-widget-content").find(".ui-menu-item-wrapper").each(function(){i(this).text()==i(n).val()&&i(this).parent("li").attr("style","background-color: #f7f7f7")}))}),i(n).autocomplete({delay:300,minLength:3,source:function(e,a){d=e.term,i.get({url:s+"&text="+i(n).val(),dataType:"json",success:function(e){var t=i.map(e.suggestions,function(e,t){return{id:e.magicKey,label:e.text,value:e.text}});a(r=t)}})},select:function(e,t){i.get({url:l+"&magicKey="+t.item.id,dataType:"json",success:function(e){var t=e.candidates[0].location.y+"|"+e.candidates[0].location.x,a=XA.component.search.query,n=a.parseHashParameters(window.location.hash);n.g=t,0<i(".auto-sort-by-distance").length&&(n.o="Distance,Ascending"),a.updateHash(n)}})}}).on("change",function(){e()}),0<i(".location-search-box-button").length&&i(".location-search-box-button").on("click",e)}else console.log("no location input")}),window.UseMyLocation=function(){},XA.ready(function(i){function t(e,t){var a=XA.component.search.query,n=a.parseHashParameters(window.location.hash);n.g=e+"|"+t,0<i(".auto-sort-by-distance").length&&(n.o="Distance,Ascending"),a.updateHash(n)}function a(e){i(".location-search-box-input").val(e)}function e(e){t(e.coords.latitude,e.coords.longitude),a("Your Location")}function n(){console.log("Your browser does not allow location services.")}function o(e){window.location.hash.indexOf("g=")<0?(t("42.731940000000066","-84.55224999999996"),a("Lansing, MI, USA")):0<=window.location.hash.indexOf("g=42.731940000000066|-84.55224999999996")&&a("Lansing, MI, USA")}function s(e){window.location.hash.indexOf("g=")<=0&&(setTimeout(function(){t(e.coords.latitude,e.coords.longitude)},200),a("Your Location"))}var l,r,d;i(".use-my-location").on("click",function(){0<i(".custom-facet-radius-dropdown").length&&("geolocation"in navigator?navigator.geolocation.getCurrentPosition(e,n):console.log("Your browser does not support geolocation."),i(".custom-facet-radius-dropdown").find("li").each(function(){i(this).removeClass("active")}))}),i(".location-search-box-input").on("focus",function(){0<=i(".location-search-box-input").val().indexOf("Your Location")&&i(".location-search-box-input").val("")}),0<i(".custom-facet-radius-dropdown").length&&("geolocation"in navigator?navigator.geolocation.getCurrentPosition(s,o):console.log("Your browser does not support geolocation.")),window.mapSelector=function(e){return!window.matchMedia("only screen and (max-width: 1023px)").matches||(window.open("http://maps.apple.com/?address="+i(e).data("mapaddress")),!1)},0<i(".map").length&&(l=".Infobox",r=function(e){i(".map").find(".Infobox").not(":last").parent("div").hide(),""!=i(".map").find(".Infobox:last .infobox-info").html()&&null!=i(".map").find(".Infobox:last .infobox-info").html()||i(".map").find(".Infobox:last").hide()},d=i(".map")[0],new(window.MutationObserver||window.WebKitMutationObserver)(function(e){e.forEach(function(e){if(e.addedNodes.length)for(var t=i(e.addedNodes).find(l),a=0,n=t.length;a<n;a++)r(t[a])})}).observe(d,{childList:!0,subtree:!0}))}),XA.ready(function(l){function r(e){var t=l(e).parents(".megamenu.main-nav:first");l(t).find(".second-level ul li.nav-item .nav-link.active").removeClass("active").attr("aria-expanded","false")}function d(e){var t=l(e).parents(".megamenu.main-nav:first");l(e).addClass("active").attr("aria-expanded","true");var a=l(e).data("subnavid");h=a,l(t).find(".third-level.active").removeClass("active"),l(a+".main-nav").addClass("active")}function c(){l(".nav-backdrop").remove(),l("div.main-nav > ul > li > div.navigation-title > .nav-link.active").removeClass("active").attr("aria-expanded","false"),l(".megamenu.main-nav.show").removeClass("show"),l(".megamenu.main-nav").find(".second-level").find("a.nav-link").removeClass("active"),l(".megamenu.main-nav").find(".third-level").removeClass("active"),l(".second-level-title").removeClass("active"),l(".third-level-title").removeClass("active"),l(".third-level").find(".nav-link").removeClass("active"),l(".second-level").find(".nav-link").removeClass("active"),l(".second-level").find(".not-link").attr("aria-expanded","false"),l(".megamenu.main-nav").find(".third-level.default").addClass("active"),h=f=void 0,l(".search-icon").show(),l(".location-search-box-input").show(),l(".plain-html").show(),l(".header__section-search-icon").hasClass("active")||(l("#MicrosoftNav").show(),l(".bm_bottomLeftOverlay").show(),l(".bm_bottomRightOverlay").show())}var f=void 0,h=void 0;l(document).click(function(e){l(e.target).closest(".megamenu").length<=0&&(c(),l("a.not-link").removeClass("clicked")),l(e.target).is(".nav-link[href*='"+document.URL+"#']")&&c()}),l("div.main-nav > ul > li > div.navigation-title").click(function(e){if(e.stopPropagation(),0<l(this).find("a.not-link").length)if(l(this).find("a.not-link").hasClass("active"))c(),l(this).find("a.not-link").removeClass("clicked");else{l(".megamenu.main-nav.show").removeClass("show"),l(".second-level").find("a.not-link").attr("aria-expanded","false");var t=l(this).data("id");l((f=t)+".main-nav").addClass("show"),l("div.main-nav > ul > li > div.navigation-title > .nav-link.active").removeClass("active"),l(this).find("a.not-link").addClass("active clicked").attr("aria-expanded","true"),l(f+".main-nav").find(".second-level").find(".second-level-title").focus(),420<l(t+".main-nav").height()&&(l(".search-icon").hide(),l(".location-search-box-input").hide(),l(".plain-html").hide()),600<l(t+".main-nav").height()&&(l("#MicrosoftNav").hide(),l(".bm_bottomLeftOverlay").hide(),l(".bm_bottomRightOverlay").hide()),l(".wrapper-dropdown").removeClass("active"),l(".nav-backdrop").length<=0&&l("body").append('<div class="nav-backdrop"></div>'),l(".header__section-search-container").hasClass("active")&&(l(".header__section-search-container").hide(),l(".header__section-search-icon").removeClass("active"),l(".header__section-search-container").removeClass("active"),l(".modal-backdrop").remove())}}),l(".megamenu.main-nav .second-level ul li.nav-item .not-link").click(function(e){e.stopPropagation();var t=l(this),a=l(t).data("subnavid");h=a,null===l(t).parents("ul.nav:first").data("activeelement")&&l(t).parents("ul.nav:first").data("activeelement",a),a==l(t).parents("ul.nav:first").data("activeelement")||(r(t),l(t).parents("ul.nav:first").data("activeelement",a)),d(t),l(h+".main-nav").find(".third-level-title").focus()}),l("div.main-nav > ul > li > div.navigation-title > .nav-link").focus(function(){l(".megamenu.main-nav.show").removeClass("show"),f=l(this).closest("div").data("id")}),l("div.main-nav > ul > li > div.navigation-title > .nav-link").blur(function(){l(".main-nav.show").length<=0&&(f=null)}),l(document).keyup(function(e){27==(e.keyCode||e.which)&&null!=f&&(e.stopPropagation(),e.preventDefault(),l(".navigation-main").find('[data-id*="'+f+'"]').find("a").focus(),c())}),l(document).keydown(function(e){var t=e.keyCode||e.which;if(32==t||13==t)if(l(".megamenu.main-nav").find(".nav-link:not(.not-link)").is(":focus"))e.preventDefault(),e.stopImmediatePropagation(),window.location.href=l(":focus").attr("href");else if(l(".megamenu.main-nav").find(".second-level").find(".nav-link.not-link").is(":focus")){e.stopPropagation(),e.preventDefault();var a=l(":focus"),n=l(a).data("subnavid");l(a).addClass("active").attr("aria-expanded","true"),h=n,null===l(a).parents("ul.nav:first").data("activeelement")&&l(a).parents("ul.nav:first").data("activeelement",n),n==l(a).parents("ul.nav:first").data("activeelement")||(r(a),l(a).parents("ul.nav:first").data("activeelement",n)),d(a),l(h+".main-nav").find(".third-level-title").focus()}else l(".headerMain-menu").find(".nav-link.not-link").is(":focus")&&(e.stopPropagation(),e.preventDefault(),f=l(":focus").parent("div").data("id"),l(f+".main-nav").hasClass("show")?(l(".navigation-main").find('[data-id*="'+f+'"]').find("a").focus(),c()):(l(f+".main-nav").addClass("show"),l(this).hasClass("no-child")||(l(this).addClass("active").attr("aria-expanded","true"),l(this).addClass("active").attr("aria-expanded","true")),420<l(f+".main-nav").height()&&(l(".search-icon").hide(),l(".location-search-box-input").hide(),l(".plain-html").hide()),l(f+".main-nav").find(".second-level").find(".second-level-title").focus()));if(40===t){if(null!=f)if(l(".lv3-last").is(":focus"))e.stopPropagation(),e.preventDefault(),l(f+".main-nav").find(".second-level").find(".active").focus();else if(l(".lv2-last").is(":focus")){e.stopPropagation(),e.preventDefault();var i=l(".navigation-main").find('[data-id*="'+f+'"]').find("a").data("index");(s=l(".navigation-main").find(".nav-link[data-index='"+(i+1)+"']")).length<=0?l(".navigation-main").find('[data-id*="'+f+'"]').find("a").focus():s.focus(),c()}else if(l(".navigation-main").find(".level1").find(".nav-link").is(":focus"))e.stopPropagation(),e.preventDefault(),l(f+".main-nav").find(".second-level").find(".second-level-title").focus();else if(l(".second-level").find(".second-level-title").is(":focus"))e.stopPropagation(),e.preventDefault(),l(f+".main-nav").find(".second-level").find(".nav-link[data-index='0']").focus();else if(l(".second-level").find(".nav-link").is(":focus")){e.stopPropagation(),e.preventDefault();var o=(i=l(":focus").data("index"))+1;l(f+".main-nav").find(".second-level").find(".nav-link[data-index='"+o+"']").focus()}else if(l(".third-level").find(".third-level-title").is(":focus")&&null!=h)e.stopPropagation(),e.preventDefault(),l(h+".main-nav").find(".nav-link[data-index='0']").focus();else if(l(".third-level").find(".nav-link").is(":focus")&&null!=h){e.stopPropagation(),e.preventDefault();o=(i=l(":focus").data("index"))+1;l(h+".main-nav").find(".nav-link[data-index='"+o+"']").focus()}}else if(38===t){if(null!=f)if(l(".third-level-title").is(":focus"))e.preventDefault(),l(f+".main-nav").find(".nav-link.active").focus();else if(l(".second-level").find(".second-level-title").is(":focus"))e.stopPropagation(),e.preventDefault(),l(".navigation-main").find('[data-id*="'+f+'"]').find("a").focus(),c();else if(l(".second-level").find(".nav-link").is(":focus")){if(e.stopPropagation(),e.preventDefault(),0==(i=l(":focus").data("index")))l(f+".main-nav").find(".second-level").find(".second-level-title").focus();else{o=i-1;l(f+".main-nav").find(".second-level").find(".nav-link[data-index='"+o+"']").focus()}}else if(l(".third-level").find(".nav-link").is(":focus")&&null!=h){if(e.stopPropagation(),e.preventDefault(),0==(i=l(":focus").data("index")))l(h+".main-nav").find(".third-level-title").focus();else{o=i-1;l(h+".main-nav").find(".nav-link[data-index='"+o+"']").focus()}}}else 39===t?null!=h&&l(h+".main-nav").find(".third-level-title").focus():37===t&&null!=h&&l(f+".main-nav").find(".nav-link.active").focus();if(9===t)if(e.shiftKey)null!=f&&(l(".third-level-title").is(":focus")?(e.preventDefault(),l(f+".main-nav").find(".nav-link.active").focus()):l(".second-level").find(".second-level-title").is(":focus")&&(e.stopPropagation(),e.preventDefault(),l(".navigation-main").find('[data-id*="'+f+'"]').find("a").focus(),c()));else if(null!=f)if(l(".lv3-last").is(":focus"))e.stopPropagation(),e.preventDefault(),l(f+".main-nav").find(".second-level").find(".active").focus();else if(l(".lv2-last").is(":focus")){e.stopPropagation(),e.preventDefault();var s;i=l(".navigation-main").find('[data-id*="'+f+'"]').find("a").data("index");(s=l(".navigation-main").find(".nav-link[data-index='"+(i+1)+"']")).length<=0?l(".navigation-main").find('[data-id*="'+f+'"]').find("a").focus():s.focus(),c()}})}),XA.ready(function(a){function n(){a("html, body").scrollTop(0)}var i=void 0,o=void 0,e=a(".breadcrumb nav ol");e.scrollLeft(e.get(0).scrollWidth),a("div.mobile-nav > ul > li > div.navigation-title > a").blur(function(){a(this).removeClass("focused")}),a("div.mobile-nav > ul > li > div.navigation-title > a").focus(function(){a(this).addClass("focused"),i=a(this).closest(".navigation-title").attr("data-id")}),a(".mobile-nav").find(".second-level").find("a.nav-link").blur(function(){a(this).removeClass("focused")}),a(".mobile-nav").find(".third-level").find("a.nav-link").focus(function(){a(this).addClass("focused")}),a(".mobile-nav").find(".third-level").find("a.nav-link").blur(function(){a(this).removeClass("focused")}),a(".mobile-nav").find(".second-level").find("a.nav-link").focus(function(){a(this).addClass("focused"),o=a(this).attr("data-subnavid")}),a(".mobile-nav").find(".second-level-back").focus(function(){a(this).addClass("focused")}),a(".mobile-nav").find(".second-level-back").blur(function(){a(this).removeClass("focused")}),a(".mobile-nav").find(".third-level-back").focus(function(){a(this).addClass("focused")}),a(".mobile-nav").find(".third-level-back").blur(function(){a(this).removeClass("focused")}),a("div.mobile-nav > ul > li > div.navigation-title").on("click",function(e){if(null==a(this).find("a").attr("href")||a(this).find("a").hasClass("not-active")){a("#menuAmobile").hide();var t=a(this).data("id");return a(t+".mobile-nav").show(),a(t+".mobile-nav").find(".second-level-back").focus(),n(),!1}a("html, body").stop()}),a(".mobile-nav").find("a.second-level-back").on("click",function(e){a(this).closest(".megamenu").hide(),a("#menuAmobile").show();var t=a(this).parents(".mobile-nav").attr("id");a("#"+t+"_link").focus(),n()}),a(".mobile-nav").find(".second-level").find("a.not-active").on("click",function(e){if(!a(this).hasClass("second-level-back")&&(null==a(this).attr("href")||a(this).hasClass("not-active"))){a(this).closest(".second-level").hide();var t=a(this).data("subnavid");return a(t+".mobile-nav").addClass("active"),a(t+".mobile-nav").find(".third-level-back").focus(),n(),!1}a("html, body").stop()}),a(".mobile-nav").find("a.third-level-back").on("click",function(e){a(".mobile-nav").find(".nav-link").removeClass("active"),a(".mobile-nav").find("div.third-level").removeClass("active"),a(this).closest(".megamenu").find(".second-level").show();var t=a(this).parents(".third-level").attr("id");a("#"+t+"_link").focus(),n()}),a(document).keydown(function(e){var t=e.keyCode||e.which;a(e.target).hasClass("nav-link")&&(32!=t&&13!=t||(a(".mobile-nav").find(".nav-link:not(.not-active)").is(":focus")?(e.preventDefault(),e.stopImmediatePropagation(),window.location.href=a(":focus").attr("href")):a(".second-level-back").is(":focus")?null!=i&&(e.preventDefault(),e.stopImmediatePropagation(),a(".mobile-nav").find(i).hide(),a("#menuAmobile").show(),a(i+"_link").focus(),i=o=void 0,n()):a(".third-level-back").is(":focus")?null!=i&&(e.preventDefault(),e.stopImmediatePropagation(),a(".mobile-nav").find(".nav-link").removeClass("active"),a(".mobile-nav").find("div.third-level").removeClass("active"),a(".mobile-nav").find(i).find(".second-level").show(),a(o+"_link").focus(),o=void 0,n()):null!=o?(e.preventDefault(),e.stopImmediatePropagation(),a(".mobile-nav").find(i).find(".second-level").hide(),a(".mobile-nav").find(o+".mobile-nav").addClass("active"),a(".mobile-nav").find(o).find(".third-level-back").focus(),n()):null!=i&&(e.preventDefault(),e.stopImmediatePropagation(),a("#menuAmobile").hide(),a(".mobile-nav").find(i+".mobile-nav").show(),a(".mobile-nav").find(i).find(".second-level-back").focus(),n())),9!==t||e.shiftKey||(a(".focused").hasClass("mobile-lv1-last")||a(".focused").hasClass("mobile-lv2-last")||a(".focused").hasClass("mobile-lv3-last"))&&e.preventDefault())}),a(".mobile-nav").find(".nav-link").removeClass("active"),a(".mobile-nav").find(".third-level").removeClass("active"),a(".mobile-nav").find("div.third-level").off()}),XA.ready(function(o){function e(){return t}var t="";XA.hasPageModes()||(0<o("#videoModal").length&&(t=o("#videoModal iframe").attr("src"),o("#videoModal").on("hidden.bs.modal",function(){o("#videoModal iframe").attr("src","")}),o("#videoModal").on("show.bs.modal",function(){o("#videoModal iframe").attr("src",e)})),0<o(".playlist-modal-anchor").length&&o(".playlist-modal-anchor").each(function(e,i){o(i).on("hidden.bs.modal",function(){o(i).find("iframe").attr("src","about:blank")}),o(i).on("show.bs.modal",function(e){var t=o(e.relatedTarget).data("playlistid"),a=o(e.relatedTarget).data("movieid");if(void 0!==t){var n="https://www.youtube.com/embed/?listType=playlist&autoplay=1&list="+t;o(i).find("iframe").attr("src",n),o(i).find("iframe").css("opacity","1")}else if(void 0!==a){n="https://www.youtube.com/embed/"+a+"?autoplay=1";o(i).find("iframe").attr("src",n),o(i).find("iframe").css("opacity","1")}})}))}),XA.ready(function(a){function o(){0<a(".search-results").length&&a(".search-results").show(),0<a(".load-more").find("input").length&&a(".load-more").find("input").show(),0<a(".search-results-count").length&&a(".search-results-count").show()}var n;0<a("[data-properties*='faqglobalsearch']").length&&(XA.hasPageModes()||0<a(".hide-on-page-load").length&&(n=0<a(".no-results").length?a(".no-results").prop("outerHTML"):"<div class='container'><div class='no-results'><div class='no-results-bold'>Uh-Oh</div>No Results Found</div></div>",XA.component.search.vent.on("results-loaded",function(){0<window.location.hash.indexOf("faqglobalsearch_q=")&&a(".search-results[data-properties*='faqglobalsearch']").removeClass("hide-on-page-load");var e=a(".search-results li .faqResult"),t=0;e.each(function(){"none"==a(this).css("display")&&t++}),e.length==t?0===a(".no-results").length&&a(".search-results[data-properties*='faqglobalsearch']").append(n):a(".search-results[data-properties*='faqglobalsearch']").find(".no-results").remove()})));a(document).ajaxComplete(function(e,t,a){var n=XA.component.search.query,i=n.parseHashParameters(window.location.hash);null==i.tagsearch?setTimeout(o,1e3):(n.updateHash(i),setTimeout(o,3e3))})}),XA.ready(function(i){XA.hasPageModes()||i(document).ajaxComplete(function(e,t,a){function n(e,t,a){e=e.trim().toLowerCase(),i(t).find(a).each(function(){i(this).find(".inpage-search__section-search").length<=0&&(e.length<=0?i(this).show():0<=i(this).text().toLowerCase().indexOf(e)?(i(this).show(),0<i(this).closest(".tabs-inner").length?i(this).parentsUntil(".tabs-inner").find(a).show():0<i(this).closest("ul").length&&i(this).parentsUntil("ul").find(a).show()):0<i(this).closest(".tabs-inner").length?0<=i(this).parentsUntil(".tabs-inner").find(a).text().toLowerCase().indexOf(e)&&(i(this).show(),i(this).parentsUntil(".tabs-inner").find(a).show()):0<i(this).closest("ul").length&&0<=i(this).parentsUntil("ul").find(a).text().toLowerCase().indexOf(e)?(i(this).show(),i(this).parentsUntil("ul").find(a).show()):i(this).hide())})}i(document).on("keypress",function(e){13==e.which&&0<i(".inpage-search__section-search").length&&0<i(".page-search-icon").length&&(n(i(".inpage-search__section-search").val(),".section__pagebody",".component-content"),n(i(".inpage-search__section-search").val(),".section__pagesidebar",".component-content"))}),i(".page-search-icon").on("click",function(){n(i(".inpage-search__section-search").val(),".section__pagebody",".component-content"),n(i(".inpage-search__section-search").val(),".section__pagesidebar",".component-content")})})}),XA.ready(function(s){function l(e){var t=s(e).find(".socrata-data");if(0<t.length)return s(t).text().replace(/\&nbsp\;/gi,"").trim()}function r(e){s(window).width()<=576&&s("#DataTables_Table_0_previous a").text(s("#DataTables_Table_0_previous a").text().substr(0,4)),e.find("thead").on("click","th,td",function(){s("table.data-table th").not(this).removeClass("highlight"),s(this).toggleClass("highlight")}),e.find("thead").on("focus","th,td",function(){s(this).addClass("highlight")}),e.find("thead").on("blur","th,td",function(){s(this).removeClass("highlight")}),s(".dataTables_filter").find("input").attr("placeholder","Search..."),s(".dataTables_filter").append("<span class='search-icon'><span class='sr-only'>Search Button</span></span>")}function o(e){var o=this;o.Table=e,o.SocrataId=l(o.Table),o.PageLength=function(e){var t=s(e).find(".page-length-data");if(0<t.length)return parseInt(s(t).text().trim())}(o.Table),void 0===o.PageLength&&(o.PageLength=10),o.Columns=[],o.Data=[];o.GetColumns=function(){var e="https://data.michigan.gov/api/views/"+o.SocrataId+"/columns.json";s.ajax({url:e,method:"GET",dataType:"json",success:function(e,t,a){for(var n=0;n<e.length;n++){var i={title:e[n].name,data:e[n].fieldName,render:void 0,defaultContent:""};"number"===e[n].renderTypeName?i.render=s.fn.dataTable.render.number(",",".",0):"calendar_date"===e[n].renderTypeName&&(i.render=function(e,t,a){return"display"===t||"filter"===t?new Date(e).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric"}).replace(/\W/g,"-"):e}),o.Columns.push(i)}o.GetData()}})},o.GetData=function(){var e="https://data.michigan.gov/resource/"+o.SocrataId+".json?$limit=50000";s.ajax({url:e,method:"GET",dataType:"json",success:function(e,t,a){o.Data=e,o.Render()}})},o.Render=function(){s(o.Table).DataTable({columns:o.Columns,pageLength:o.PageLength,data:o.Data,responsive:!0,fixedHeader:!0,initComplete:function(e,t){s(this).find("thead").width()<=s(this).width()&&(console.log(s(this)),s(this).css("display","table"))}}),r(s(o.Table))},o.Initialize=function(){return"string"!=typeof o.SocrataId?(console.log("DataSet Code needs to be STRING"),null):0==o.SocrataId.length?(console.log("DataSet Code is empty."),null):RegExp("[0-9a-z]{4}-[0-9a-z]{4}").test(o.SocrataId)?(o.GetColumns(),void(s(window).width()<=576&&(s.fn.DataTable.ext.pager.numbers_length=5))):(console.log("DataSet Code does not match 4-4 pattern."),null)}}XA.hasPageModes()?s("table.data-table").show():s("table.data-table").each(function(e,t){if(void 0===l(s(t))){if(s(t).find("thead").length<=0||s(t).find("tbody").length<=0){var a="<thead>"+s(t).find("tr:first").html()+"</thead>",n="<tbody>"+s(t).find("tr:not(:first)").html()+"</tbody>";s(t).html(a+n)}s(t).find("td").each(function(e,t){var a=s(t).text();if(4<=a.length&&(a.includes("/")||a.includes("-"))){var n=new Date(s(t).text());n instanceof Date&&!isNaN(n)&&s(t).attr("data-order",n.getTime())}}),s(t).DataTable({responsive:!0,fixedHeader:!0,initComplete:function(e,t){s(this).find("thead").width()<=s(this).width()&&s(this).css("display","table")}}),r(s(t))}else{var i=new o(s(t));void 0===window.socrataTables&&(window.socrataTables=[]),window.socrataTables.push(i),window.socrataTables[window.socrataTables.length-1].Initialize()}})}),XA.ready(function(o){o(".video5050").on("click",function(){for(var e=o(this),t=e.contents(),a=t.length,n=null,i=0;i<a;i++)8==t[i].nodeType&&(n=t[i].textContent);e.addClass("player").html(n),e.off("click")})});